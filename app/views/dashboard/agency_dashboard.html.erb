<div class="dashboard-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-logo">
      <span>üè¢</span> CreatorBoost
    </div>
    
    <nav class="sidebar-nav">
      <a href="<%= dashboard_path %>" class="nav-item active">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" width="20" height="20">
          <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
        </svg>
        Dashboard
      </a>
      <a href="#" class="nav-item">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" width="20" height="20">
          <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" />
        </svg>
        Creators
      </a>
      <a href="#" class="nav-item">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" width="20" height="20">
          <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
        </svg>
        Analytics
      </a>
      <a href="#" class="nav-item">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" width="20" height="20">
          <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z" clip-rule="evenodd" />
        </svg>
        Reports
      </a>
      <a href="#" class="nav-item">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" width="20" height="20">
          <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
        </svg>
        Settings
      </a>
    </nav>
    
    <div class="user-section">
      <div class="user-info">
        <div class="user-avatar">
          <%= current_user.email[0].upcase %>
        </div>
        <div class="user-details">
          <div class="user-name"><%= current_user.email.split('@').first %></div>
          <div class="user-role">Agency Manager</div>
        </div>
      </div>
      
      <%= button_to destroy_user_session_path, method: :delete, class: "nav-item", style: "width: 100%; margin-top: 1rem; border: none; cursor: pointer; text-align: left;" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" width="20" height="20">
          <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V7.414l-5-5H3zm6.293 11.293a1 1 0 001.414 1.414l4-4a1 1 0 000-1.414l-4-4a1 1 0 10-1.414 1.414L12.586 9H7a1 1 0 100 2h5.586l-3.293 3.293z" clip-rule="evenodd" />
        </svg>
        Sign out
      <% end %>
    </div>
  </aside>
  
  <!-- Main Content -->
  <main class="main-content">
    <div class="page-header">
      <h1 class="page-title">Agency Dashboard</h1>
      <p class="page-subtitle">
        Manage your creator clients and grow your business
      </p>
    </div>
    
    <!-- Stats Grid -->
    <div class="dashboard-grid">
      <div class="stat-card">
        <div class="stat-title">Total Creators</div>
        <div class="stat-value"><%= @agency_stats[:total_creators] %></div>
        <div class="stat-trend trend-up">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
            <path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd" />
          </svg>
          +2 this month
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-title">Active Creators</div>
        <div class="stat-value"><%= @agency_stats[:active_creators] %></div>
        <div class="stat-trend trend-up">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
            <path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd" />
          </svg>
          90% activation rate
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-title">Total Revenue</div>
        <div class="stat-value"><%= @agency_stats[:total_revenue] %></div>
        <div class="stat-trend trend-up">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
            <path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd" />
          </svg>
          <%= @agency_stats[:growth_rate] %> vs last month
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-title">AI Chats Generated</div>
        <div class="stat-value">3,254</div>
        <div class="stat-trend trend-up">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
            <path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd" />
          </svg>
          32.4% this month
        </div>
      </div>
    </div>
    
    <!-- Creators Overview Card -->
    <div class="activity-card">
      <div class="activity-header">
        <h2 class="activity-title">Creator Management</h2>
        <a href="#" class="view-all">View All Creators</a>
      </div>
      
      <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; min-width: 600px;">
          <thead>
            <tr style="border-bottom: 1px solid #e2e8f0; text-align: left;">
              <th style="padding: 0.75rem 1rem; font-weight: 500; color: #64748b;">Creator</th>
              <th style="padding: 0.75rem 1rem; font-weight: 500; color: #64748b;">Status</th>
              <th style="padding: 0.75rem 1rem; font-weight: 500; color: #64748b;">Subscribers</th>
              <th style="padding: 0.75rem 1rem; font-weight: 500; color: #64748b;">Growth</th>
              <th style="padding: 0.75rem 1rem; font-weight: 500; color: #64748b;">Actions</th>
            </tr>
          </thead>
          <tbody>
            <% if @organizations.present? %>
              <% CreatorProfile.where(organization_id: @organizations.pluck(:id)).limit(5).each do |creator| %>
                <tr style="border-bottom: 1px solid #e2e8f0;">
                  <td style="padding: 0.75rem 1rem;">
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                      <div style="width: 2.5rem; height: 2.5rem; border-radius: 9999px; background-color: #4f46e5; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">
                        <%= creator.name[0].upcase %>
                      </div>
                      <div>
                        <div style="font-weight: 500;"><%= creator.name %></div>
                        <div style="font-size: 0.75rem; color: #94a3b8;"><%= creator.onlyfans_username %></div>
                      </div>
                    </div>
                  </td>
                  <td style="padding: 0.75rem 1rem;">
                    <span style="
                      background-color: <%= creator.status == 'active' ? '#DCFCE7' : '#FEE2E2' %>; 
                      color: <%= creator.status == 'active' ? '#166534' : '#991B1B' %>;
                      padding: 0.25rem 0.5rem;
                      border-radius: 9999px;
                      font-size: 0.75rem;
                      font-weight: 500;
                    ">
                      <%= creator.status.capitalize %>
                    </span>
                  </td>
                  <td style="padding: 0.75rem 1rem; font-weight: 500;">
                    <%= rand(100..2000) %> <!-- Placeholder data -->
                  </td>
                  <td style="padding: 0.75rem 1rem;">
                    <div style="display: flex; align-items: center; gap: 0.25rem; color: #10b981;">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
                        <path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd" />
                      </svg>
                      <%= rand(2.1..15.9).round(1) %>%
                    </div>
                  </td>
                  <td style="padding: 0.75rem 1rem;">
                    <div style="display: flex; gap: 0.5rem;">
                      <a href="#" style="color: #4f46e5; font-size: 0.875rem;">View</a>
                      <a href="#" style="color: #4f46e5; font-size: 0.875rem;">Edit</a>
                    </div>
                  </td>
                </tr>
              <% end %>
            <% else %>
              <tr>
                <td colspan="5" style="padding: 1.5rem; text-align: center; color: #64748b;">
                  No creators found. Add your first creator to get started.
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
    
    <!-- Add Creator Button -->
    <div style="display: flex; justify-content: center; margin-top: 1rem; margin-bottom: 2rem;">
      <a href="#" class="nav-item active" style="
        display: inline-flex;
        width: auto;
        background-color: #4f46e5;
        color: white;
      ">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" width="20" height="20">
          <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
        Add New Creator
      </a>
    </div>
    
    <!-- Organizations Card -->
    <div class="activity-card">
      <div class="activity-header">
        <h2 class="activity-title">Your Organizations</h2>
        <a href="#" class="view-all">Manage Organizations</a>
      </div>
      
      <div class="profile-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <% if @organizations.present? %>
          <% @organizations.each do |org| %>
            <div style="background-color: #f8fafc; padding: 1rem; border-radius: 0.5rem;">
              <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem;"><%= org.name %></h3>
              <p style="font-size: 0.875rem; color: #64748b; margin-bottom: 0.75rem;">
                <%= CreatorProfile.where(organization_id: org.id).count %> creators
              </p>
              <div style="display: flex; gap: 0.5rem;">
                <a href="#" style="font-size: 0.875rem; color: #4f46e5;">View Details</a>
                <a href="#" style="font-size: 0.875rem; color: #4f46e5;">Edit</a>
              </div>
            </div>
          <% end %>
        <% else %>
          <div style="grid-column: span 2; text-align: center; padding: 2rem 0;">
            <p style="color: #64748b; margin-bottom: 1rem;">No organizations found.</p>
            <a href="#" class="nav-item active" style="
              display: inline-flex;
              width: auto;
              background-color: #4f46e5;
              color: white;
              margin: 0 auto;
            ">
              Create Organization
            </a>
          </div>
        <% end %>
      </div>
    </div>
  </main>
</div> 